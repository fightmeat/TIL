그러면 최종적으로는 이런코드가 되겠네요

```python

import sqlite3
import pickle
import random
DB_NAME = "vocabulary.db"

def setup_database(): # 데이터베이스를 셋업하는 함수를 하나 만들죠
    conn = sqlite3.connect(DB_NAME) # 데이터베이스에 연결하는 객체를 conn으로 , DB_NAME은 파일이름변수에요
    cursor = conn.cursor() # 커서없이 실행하면 그냥 코드를 왕창 다 실행! 할수있어요 그러면 망하는거에요
    cursor.execute("""
    CREATE TABLE IF NOT EXISTS vocabulary (
        word TEXT PRIMARY KEY,
        meanings TEXT
    )
    """) # execute는 sql명령어를 실행하는 코드!
# 안쪽코드는 if문을 섞어서 단어장테이블이 없으면 만드는 코드에요
# 존재하면 else문은 안써서 그냥 스킵이 되지요
# 그리고 딕셔너리니까 단어는 키값으로 뜻은 값으로 담으면 되겠죠? 중복값이니까?
    conn.commit() # 커밋(그냥 저장이죠 뭐)
    conn.close() # 열려있으면 리소스를 왕창 먹어서 닫아야죠

def load_data(): # 요건 데이터를 받아와요
    conn = sqlite3.connect(DB_NAME) # 위랑 똑같아요
    cursor = conn.cursor() #  커서로 순차적으로 실행해야겠죠?
    cursor.execute("SELECT word, meaning FROM vocabulary") # execute는 실행하는 코드고 select로 vocabulary테이블에서 word열과 meaning열을 가져와요
    data = {row[0]: row[1].split(', ') for row in cursor.fetchall()} # 요 코드는 해석하자면

# 일단 단어장이니까 딕셔너리가 필요하니까 data에 딕셔너리값으로 변환시켜 넣고
# 스플릿을 통해서 , 기준으로 값을 따와요 ex) add면 더하다, 추가하다 이렇게 뜻이 여러개니까
# fetchall()은 모든 결과의 행을 반환하는 함수에용
# 저거를 풀어서 해석하면
#    rows = cursor.fetchall() 모든 결과를 행을 가져와서 rows에 할당하고
#    for row in rows: rows만큼 for문을 돌리는데 row는 그냥 내맘대로 이름정한거에요 
#    word = row[0] # 여기에 인덱싱을 하면 0행이 되서 word에 저장되고(파이썬은 0부터 끝-1까지니까)
#    meaning = row[1].split(', ') 뜻은 1행에 저장되는데 여러개니까 콤마를 기준으로 스플릿해서 일단 담습니다. 기본으로 리스트에 담기니까 그냥 넣으면 되요
#    data[word] = meaning # 그리고 담은 뜻들을 단어의 인덱싱에 포함을 하면 한단어에 여러개의 뜻이 담기게 됩니다. 

    conn.close() # 리소스먹으니까 닫아주고
    return data # 데이터를 리턴하죠

def save_data(vocabulary): # 저장하는 함수를 만듭시다.
    conn = sqlite3.connect(DB_NAME) # 연결도 똑같이
    cursor = conn.cursor() # 커서도 똑같이

    for word, meaning in vocabulary.items(): # 이전에 썼던 for문이에요 items()는 get()과 다르게 다 가져올수있어요
        meanings = ', '.join(meaning) # 여러개의 뜻이 있을수도 있으니까 조인으로 콤마를 기준삼아서 뜻을 옆에다가 붙인변수를 meanings라고 할까요?
           
         # INSERT OR REPLACE INTO는 SQLite의 특별한 SQL 구문 중 하나입니다. 이 구문은 주어진 데이터를 테이블에 삽입하려고 시도하며,
         # 만약 지정된 PRIMARY KEY 또는 UNIQUE 제약 조건을 가진 값이 이미 테이블에 존재하는 경우 해당 레코드를 대체한다고 하네용.
         # execute로 명령어를 실행하고 VALUES 의 ?는 파라미터 플레이스홀더라고 이 플레이스홀더는 코드에서 제공되는 값으로 대체된다고 하네요.
         # 저걸 쓰면 SQL 인젝션 공격?으로 부터 방어할수있다고 하네요. 일단 좋다니까 쓰죠 뭐

        cursor.execute("INSERT OR REPLACE INTO vocabulary (word, meaning) VALUES (?, ?)", (word, meanings)) 

    conn.commit() # 저장 
    conn.close() # 리소스먹으니까 닫기

def add_word(vocabulary):
    word = input("추가할 단어를 입력하세요: ").strip()
    meaning = input(f"{word}의 뜻을 입력하세요: ").strip()

    word = word.lower()

    if word in vocabulary:
        if meaning not in vocabulary[word]:
            vocabulary[word].append(meaning)
        else:
            print(f"'{meaning}' 은 중복되는 뜻이에요.")
    else:
        vocabulary[word] = [meaning]

    return vocabulary

def delete_word(vocabulary):
    word = input("삭제할 단어를 입력하세요: ").strip()
    meaning = input(f"{word}의 뜻을 삭제하려면 뜻을 입력하세요 (전체 삭제는 그냥 Enter): ").strip()

    if word in vocabulary:
        if meaning:
            if meaning in vocabulary[word]:
                vocabulary[word].remove(meaning)
                if not vocabulary[word]:
                    del vocabulary[word]
            else:
                print(f"'{meaning}' 는 '{word}'의 뜻에 없어요.")
        else:
            del vocabulary[word]
    else:
        print(f"'{word}' 는 단어장에 없습니다.")

    return vocabulary

def search_language(vocabulary):
    language = input("검색할 단어나 뜻을 입력하세요: ").strip()
    results = {}

    for word, meaning in vocabulary.items():
        if language == word or language in meaning:
            results[word] = meaning

    if results:
        for word, meaning in results.items():
            print(f"{word} : {', '.join(meaning)}")
    else:
        print("검색된 단어나 뜻이 없습니다.")

def list_language(vocabulary):
    zero = 0
    total_words = len(vocabulary)
    print(f"총 단어 수: {total_words}\n")

    while True:
        if zero < len(vocabulary):
            for word, meaning in list(vocabulary.items())[zero:zero+10]:
                print(f"{word} : {', '.join(meaning)}")
            choice = input("\n다음 페이지를 볼꺼면 y를 눌러주세요. 메뉴로 나가려면 q를 눌러주세요: ").lower().strip()

            if choice == 'y':
                zero += 10
            elif choice == 'q':
                print("메뉴로 돌아갑니다.")
                break
            else:
                print("잘못된 입력입니다. 'y' 또는 'q'를 입력해주세요.")
                continue
        else:
            print("더 이상 단어가 없습니다.")
            break

def random_test(vocabulary):
    while True:
        if not vocabulary:
            print("테스트할 단어가 없습니다. 먼저 단어를 추가해주세요.")
            return

        word, meanings = random.choice(list(vocabulary.items()))
        # 정답 목록에서의 앞뒤 공백 제거
        meanings = [meaning.strip() for meaning in meanings]

        if random.choice([True, False]):
            print(f"'{word}'의 뜻은 무엇인가요?")
            answer = input("뜻을 입력하세요 (메뉴로 돌아가려면 'q' 입력, 여러 답을 입력할 때는 쉼표로 구분): ").lower().strip()
            if answer == "q":
                print("메뉴로 돌아갑니다.")
                return
            answer_list = [ans.strip() for ans in answer.split(',')]

            # 사용자의 답 중 하나라도 단어의 의미와 정확히 일치하지 않는 경우
            if not all(ans in meanings for ans in answer_list):
                print(f"틀렸습니다. 정답은 {', '.join(meanings)} 입니다.")
            else:
                print(f"정답입니다! 정답은 {', '.join(meanings)} 입니다.")
        else:
            selected_meaning = random.choice(meanings)
            print(f"이 뜻을 가진 단어는 무엇인가요? : {selected_meaning}")
            answer = input("단어를 입력하세요 (메뉴로 돌아가려면 'q' 입력): ").lower().strip()
            if answer == "q":
                print("메뉴로 돌아갑니다.")
                return
            if answer == word:
                print(f"정답입니다! 정답은 '{word}' 입니다.")
            else:
                print(f"틀렸습니다. 정답은 '{word}' 입니다.")
        print("\n다음 문제!\n")

def main():
    setup_database()
    vocabulary = load_data()

    while True:
        print("\n영어 단어장 프로그램\n")
        print("1. 단어 추가")
        print("2. 단어 삭제")
        print("3. 단어 검색")
        print("4. 전체 단어 보기")
        print("5. 단어 랜덤 테스트")
        print("6. 종료")

        choice = input("원하시는 기능의 번호를 입력하세요: ").strip()
        if choice == "1":
            vocabulary = add_word(vocabulary)
        elif choice == "2":
            vocabulary = delete_word(vocabulary)
        elif choice == "3":
            search_language(vocabulary)
        elif choice == "4":
            list_language(vocabulary)
        elif choice == "5":
            random_test(vocabulary)
        elif choice == "6":
            save_data(vocabulary)
            print("프로그램을 종료합니다.")
            break
        else:
            print("잘못된 입력입니다. 다시 선택해주세요.")

if __name__ == "__main__":
    main()
